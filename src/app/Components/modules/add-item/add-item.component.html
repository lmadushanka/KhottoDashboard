<button mat-button class="btn btn-primary" routerLink="/items">
  View Item
</button>
<br />
<hr>
<br />

<div class="lightgray-back form-container">
  <form class="row" [formGroup]="addItemForm" autocomplete="off">
    <!-- Item Type -->
    <mat-form-field
      class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"
      appearance="fill"
    >
      <mat-label>Select Item Type</mat-label>
      <mat-select formControlName="itemType" required>
        <mat-option
          *ngFor="let item of itemTypeList"
          value="{{ item.value }}"
          (click)="onItemTypeSelect(item.value)"
          >{{ item.name }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <!-- Name -->
    <mat-form-field
      class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"
      appearance="fill"
    >
      <mat-label>Item Name</mat-label>
      <input
        matInput
        placeholder="Enter Item Name"
        type="text"
        formControlName="itemName"
        required
      />
    </mat-form-field>

    <!-- Price -->
    <mat-form-field
      class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"
      appearance="fill"
    >
      <mat-label>Price</mat-label>
      <input
        matInput
        placeholder="Enter Item Price"
        type="number"
        formControlName="itemPrice"
        required
      />
    </mat-form-field>

    <!-- Cover Image -->
    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
      <label class="col-12">Upload Cover Image</label>
      <input
        type="file"
        name="cover"
        accept="image/*"
        (change)="onCoverSelected($event)"
        formControlName="cover"
      />
      <label class="col-12 err" *ngIf="coverIf">Please upload cover...</label>
      <img [src]="imgURLCover" height="120" width="180" *ngIf="imgURLCover" />
    </div>

    <!-- Description -->
    <mat-form-field
      class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
      appearance="fill"
      style="margin-top: 0.5%"
    >
      <mat-label>Description</mat-label>
      <textarea
        matInput
        placeholder="Description"
        type="text"
        formControlName="description"
        required
      ></textarea>
    </mat-form-field>

    <hr style="width: 100%" />

    <mat-form-field
      class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"
      appearance="fill"
      *ngIf="providerType"
    >
      <mat-label>Select Provider</mat-label>
      <mat-select formControlName="provider" required>
        <mat-option
          *ngFor="let provider of provider"
          value="{{ provider.providerId }}"
          >{{ provider.providerName }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <mat-form-field
      class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"
      appearance="fill"
      *ngIf="itemType"
    >
      <mat-label>Item Availabilty</mat-label>
      <input
        matInput
        placeholder="Enter Availabilty"
        type="text"
        formControlName="itemAvailability"
        required
      />
    </mat-form-field>

    <hr style="width: 100%" />

    <div
      class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
      *ngIf="itemOptions.length != 0"
    >
      <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
        >Options</label
      >
      <div
        class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3 float-left"
        appearance="fill"
        *ngFor="let itemOption of itemOptions; let ioIndex = index"
      >
        <input
          id="{{ itemOption.optionName }}{{ itemOption.optionId }}"
          type="checkbox"
          [checked]="itemOption.isActiveOption"
          value="{{ itemOption.optionId }}"
          (change)="
            updateOption(itemOption.optionName, itemOption.optionId, ioIndex)
          "
        />
        {{ itemOption.optionName }}
      </div>
    </div>

    <hr style="width: 100%" *ngIf="itemOptions.length != 0" />

    <!-- Terms -->
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
      <mat-label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
        >Terms</mat-label
      ><br />
      <!-- term -->
      <mat-form-field
        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
        appearance="fill"
      >
        <mat-label>Term</mat-label>
        <input
          id="term"
          matInput
          placeholder="Enter Term"
          type="text"
          autocomplete="off"
          #term
          (click)="errTerm.show = false"
        />
      </mat-form-field>

      <mat-card-actions
        class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3 btn-plus"
      >
        <button class="btn btn-success btn-round" (click)="addTerm(term.value)">
          +
        </button>
      </mat-card-actions>
      <span class="err-msg" *ngIf="errTerm.show">{{ errTerm.value }}</span>

      <!-- Term Table -->
      <table class="table" *ngIf="termArray.length != 0">
        <thead>
          <tr>
            <th scope="col" style="width: 80%">Title</th>
            <th scope="col" style="width: 20%"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let term of termArray; let pIndex = index">
            <td scope="row">
              {{ term }}
            </td>
            <td scope="row">
              <button class="btn btn-danger" (click)="removeTerm(pIndex)">
                -
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <hr style="width: 100%" />

    <!-- Submit Button -->
    <mat-card-actions class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
      
      <button
        class="btn btn-sucess"
        mat-raised-button
        color="primary"
        type="submit"
        (click)="onSubmit()"
        style="margin: 15px; padding: 5px 20px"
      >
        Submit
      </button>
    </mat-card-actions>
  </form>
</div>
